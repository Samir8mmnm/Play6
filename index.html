<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ë–∏—Ç–≤–∞</title>
    <link rel="stylesheet" href="style.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
</head>
<body>
    <div class="container">
        <!-- –ì–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
        <div class="main-panel panel">
            <!-- –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω -->
            <div id="start">
                <h1>üéÆ –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ë–∏—Ç–≤–∞</h1>
                <p class="subtitle">–ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ–∏ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏ –≤ –æ–¥–∏–Ω–æ—á–∫—É –∏–ª–∏ —Å –¥—Ä—É–∑—å—è–º–∏!</p>
                
                <div class="settings-grid">
                    <div class="setting-card">
                        <h3>üë§ –ü—Ä–æ—Ñ–∏–ª—å</h3>
                        <label for="nick">–í–∞—à –Ω–∏–∫–Ω–µ–π–º:</label>
                        <input type="text" id="nick" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫" value="–ò–≥—Ä–æ–∫">
                        <div id="special-nick-info" class="hidden" style="margin-top: 10px; padding: 10px; background: rgba(102, 126, 234, 0.1); border-radius: 8px; color: #667eea; font-size: 14px;">
                            <strong>‚ú® –°–µ–∫—Ä–µ—Ç–Ω—ã–µ –∏–º–µ–Ω–∞:</strong> –≠–ø—à—Ç–µ–π–Ω, –ü–∏–¥–∏–¥–∏, –ú–µ–≥–∞–º–∞–Ω—Å, –ß–∞—Ö–∞–ø–æ–≤ - –¥–∞—é—Ç —Ö2 –æ–ø—ã—Ç!
                        </div>
                    </div>
                    
                    <div class="setting-card">
                        <h3>üéÆ –†–µ–∂–∏–º –∏–≥—Ä—ã</h3>
                        <select id="mode">
                            <option value="single">–û–¥–∏–Ω–æ—á–Ω–∞—è –∏–≥—Ä–∞</option>
                            <option value="multi">–ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä</option>
                        </select>
                    </div>
                </div>

                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–¥–∏–Ω–æ—á–Ω–æ–π –∏–≥—Ä—ã -->
                <div id="single-settings">
                    <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–¥–∏–Ω–æ—á–Ω–æ–π –∏–≥—Ä—ã</h3>
                    <label for="auto-count">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤ (1-50):</label>
                    <input type="number" id="auto-count" min="1" max="50" value="10">
                    
                    <div class="button-group">
                        <button onclick="startSingleGame()" class="success">üéØ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
                    </div>
                </div>

                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–∞ -->
                <div id="multi-settings" class="hidden">
                    <div class="settings-grid">
                        <div class="setting-card">
                            <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã</h3>
                            <label for="multi-question-count">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤:</label>
                            <select id="multi-question-count">
                                <option value="10">10 –≤–æ–ø—Ä–æ—Å–æ–≤</option>
                                <option value="15">15 –≤–æ–ø—Ä–æ—Å–æ–≤</option>
                                <option value="20" selected>20 –≤–æ–ø—Ä–æ—Å–æ–≤</option>
                                <option value="25">25 –≤–æ–ø—Ä–æ—Å–æ–≤</option>
                                <option value="30">30 –≤–æ–ø—Ä–æ—Å–æ–≤</option>
                            </select>
                            
                            <label for="question-time">–í—Ä–µ–º—è –Ω–∞ –≤–æ–ø—Ä–æ—Å (—Å–µ–∫):</label>
                            <select id="question-time">
                                <option value="30">30 —Å–µ–∫—É–Ω–¥</option>
                                <option value="45" selected>45 —Å–µ–∫—É–Ω–¥</option>
                                <option value="60">60 —Å–µ–∫—É–Ω–¥</option>
                                <option value="90">90 —Å–µ–∫—É–Ω–¥</option>
                            </select>
                        </div>
                        
                        <div class="setting-card">
                            <h3>üîó –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</h3>
                            <label for="room-code">–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å):</label>
                            <input type="text" id="room-code" placeholder="–í–≤–µ–¥–∏—Ç–µ 4-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥" maxlength="4" style="text-transform: uppercase">
                            
                            <div class="button-group">
                                <button onclick="createRoom()" class="success">üéÆ –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>
                                <button onclick="joinRoom()" class="primary">üîó –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –õ–æ–±–±–∏ -->
            <div id="lobby" class="hidden">
                <div class="room-info">
                    <h2>üé™ –ö–æ–º–Ω–∞—Ç–∞ –æ–∂–∏–¥–∞–Ω–∏—è</h2>
                    <div class="room-code" id="room-code-display">XXXX</div>
                    <p>–ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –¥—Ä—É–∑–µ–π –ø–æ –∫–æ–¥—É –∏–ª–∏ —Å—Å—ã–ª–∫–µ</p>
                    
                    <div class="share-box" id="share-link" onclick="copyRoomCode()">
                        –ù–∞–∂–º–∏—Ç–µ —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É
                    </div>
                </div>

                <div id="lobby-info"></div>

                <h3>üë• –ò–≥—Ä–æ–∫–∏ –≤ –∫–æ–º–Ω–∞—Ç–µ (<span id="players-count">0</span>/8)</h3>
                <div id="players-list"></div>

                <div class="button-group">
                    <button id="ready-btn" onclick="toggleReady()" class="secondary">‚úÖ –Ø –≥–æ—Ç–æ–≤</button>
                    <button id="start-btn" onclick="startRoomGame()" class="success hidden">üöÄ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
                    <button id="force-start-btn" onclick="forceStartGame()" class="warning hidden">‚ö° –ù–∞—á–∞—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ</button>
                    <button onclick="leaveRoom()" class="danger">üö™ –í—ã–π—Ç–∏ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã</button>
                </div>
            </div>

            <!-- –ò–≥—Ä–æ–≤–æ–π –ø—Ä–æ—Ü–µ—Å—Å -->
            <div id="game" class="hidden">
                <div class="game-header">
                    <h2>üß† –í–æ–ø—Ä–æ—Å <span id="qnum">1</span> –∏–∑ <span id="qtotal">10</span></h2>
                    <div class="score-display">
                        üèÜ <span id="score">0</span> –æ—á–∫–æ–≤
                        <span id="bonus-indicator" class="hidden">(x2 –æ–ø—ã—Ç)</span>
                    </div>
                </div>
                
                <div id="progress-container">
                    <div id="progress-bar"></div>
                </div>
                
                <div id="timer">
                    ‚è±Ô∏è –í—Ä–µ–º—è: <span id="timer-value">0</span> —Å–µ–∫
                </div>
                
                <div id="question">
                    <div id="question-text">–í–æ–ø—Ä–æ—Å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...</div>
                </div>
                
                <div id="options"></div>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
            <div id="results" class="hidden">
                <h2>üèÜ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã</h2>
                
                <div class="results-summary">
                    <div id="final-result" style="font-size: 1.2em; text-align: center; margin: 20px 0;"></div>
                    
                    <div id="winner" class="hidden">
                        <div class="winner-icon">üèÜ</div>
                        <h3 class="winner-text">–ü–û–ë–ï–î–ê!</h3>
                        <p>–í—ã –∑–∞–Ω—è–ª–∏ –ø–µ—Ä–≤–æ–µ –º–µ—Å—Ç–æ!</p>
                    </div>
                </div>

                <h3>üèÖ –û–±—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
                <table id="final-results">
                    <thead>
                        <tr>
                            <th>–ú–µ—Å—Ç–æ</th>
                            <th>–ò–≥—Ä–æ–∫</th>
                            <th>–û—á–∫–∏</th>
                            <th>–°—Ç–∞—Ç—É—Å</th>
                            <th>–¢–æ—á–Ω–æ—Å—Ç—å</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>

                <div class="button-group">
                    <button onclick="showDetailedResults()" id="details-btn" class="primary">üìä –ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
                    <button onclick="location.reload()" class="secondary">üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
                    <button onclick="returnToLobby()" id="return-btn" class="success hidden">‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –ª–æ–±–±–∏</button>
                </div>
            </div>
        </div>

        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <div class="side-panel panel">
            <h3>üìä Live-—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
            <div id="live-results" class="hidden">
                <div id="live-results-content"></div>
            </div>

            <h3>üìù –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
            <div id="detailed-results" class="hidden">
                <div id="answers-list"></div>
            </div>

            <div class="debug-section">
                <h3>üêõ –û—Ç–ª–∞–¥–∫–∞</h3>
                <button onclick="toggleDebug()" class="debug-button">üìã –ü–æ–∫–∞–∑–∞—Ç—å/–°–∫—Ä—ã—Ç—å –ª–æ–≥–∏</button>
                
                <div id="debug-panel" class="hidden">
                    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                        <button onclick="clearDebug()" class="debug-button">üßπ –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏</button>
                        <button onclick="testFirebaseConnection()" class="debug-button">üîß –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Firebase</button>
                    </div>
                    <div id="debug-content"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- –≠–ª–µ–º–µ–Ω—Ç—ã –ø–æ–≤–µ—Ä—Ö —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    <div id="loader" class="loader hidden">
        <div class="spinner"></div>
    </div>

    <div id="countdown" class="hidden">3</div>

    <div id="connection-status" class="hidden"></div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç -->
    <script src="game.js"></script>
</body>
                  </html>
